{% load django_bootstrap5 %}
{% load static %}
{% load i18n %}
{% load coop %}

<!doctype html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}WirMarkt - {% translate "Member Administration and Shift Plan" %}{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'core/bootstrap/5.1.3/css/bootstrap.min.css' %}">
    <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}"/>
    <link rel="stylesheet" href="{% static 'core/css/base.css' %}">
    <link rel="stylesheet" href="{% static "core/css/custom.css" %}">

    <!-- jQuery is required by select2, so load it here at the top -->
    <script src="{% static 'core/jQuery/jquery-3.5.1.min.js' %}"></script>

    {% block head %}{% endblock %}
</head>

<body>
<!-- Top navigation-->
<nav class="navbar navbar-expand-md sticky-top navbar-light border-bottom mb-4" id="navbar-top">
    <div class="container-xxl">
        <a class="navbar-brand" href="{% url "accounts:user_me" %}">
            <img alt="Logo" height=30" src="{% static 'core/images/Logo_dark.svg' %}">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse multi-collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto my-2 my-lg-0">
                {% block navbar %}
                {% if request.user.is_authenticated %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url "accounts:user_me" %}">{{ request.user.first_name }} {{ request.user.last_name }}</a>
                </li>
                {% endif %}
                {% if perms.welcomedesk.view %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url "coop:welcome_desk_search" %}" id="welcome_desk_link">{% translate "Welcome Desk" %}</a>
                </li>
                {% endif %}
                {% if perms.coop.manage %}
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {% translate "Cooperative" %}
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="{% url "coop:shareowner_list" %}">{% translate "Members" %}</a></li>
                        <li><a class="dropdown-item" href="{% url "coop:draftuser_list" %}">{% translate "Applicants" %}</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{% url "coop:statistics" %}">{% translate "Statistics" %}</a></li>
                        <li><a class="dropdown-item" href="{% url "coop:matching_program_list" %}">{% translate "Matching program" %}</a></li>
                    </ul>
                </li>
                {% endif %}
                {% if perms.shifts.manage %}
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {% translate "Shifts" %}
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="{% url "shifts:calendar_future" %}">{% translate "Shift calendar" %}</a></li>
                        <li><a class="dropdown-item" href="{% url "shifts:shift_template_overview" %}">{% translate "ABCD week-plan" %}</a></li>
                        <li>
                            <a class="dropdown-item" href="{% url "shifts:shift_template_group_calendar" %}">
                                {% translate "ABCD calendar" %}
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{% url "shifts:calendar_past" %}">{% translate "Past shifts" %}</a></li>
                        <li><a class="dropdown-item" href="{% url "shifts:shift_exemption_list" %}">{% translate "Shift exemptions" %}</a></li>
                    </ul>
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url "shifts:calendar_future" %}">{% translate "Shift calendar" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url "shifts:shift_template_overview" %}">{% translate "ABCD week-plan" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url "shifts:shift_template_group_calendar" %}">
                        {% translate "ABCD calendar" %}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url "shifts:create_shift" %}">
                        {% translate "Add a shift" %}
                    </a>
                </li>
                {% endif %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url "coop:tools_chat" %}">
                        {% translate "Chat" %}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url "coop:tools_app" %}">
                        {% translate "App" %}
                    </a>
                </li>
                {% endblock %}
            </ul>
            {% if perms.coop.manage %}
            <form class="d-flex" method="get" action="{% url "coop:shareowner_list" %}">
                <input id="member_search" name="display_name" type="text" placeholder="{% translate "Search Members" %}" class="form-control me-2"/>
            </form>
            {% endif %}
            <ul class="navbar-nav my-2 my-lg-0">
                {% if request.user.is_authenticated %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url "logout" %}" id="logout">Logout</a>
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url "login" %}">Login</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<div class="container-xxl">
    <!-- Page content-->
    {% bootstrap_messages %}
    {% block content %}{% endblock %}
</div>
</body>

<script src="{% static 'core/bootstrap/5.1.3/js/bootstrap.bundle.min.js' %}"></script>
<script type="text/javascript">
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })
</script>
</html>
