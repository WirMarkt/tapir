{% load i18n %}
{% load django_bootstrap5 %}

{% load log %}

<div class="card m-2">
    <div class="card-header">
        <h5>{% translate "Log" %}</h5>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-striped" aria-label="{% translate 'List of log entries for this member' %}">
                <thead>
                <tr>
                    <th scope="col">{% translate 'Date' %}</th>
                    <th scope="col">{% translate 'Actor' %}</th>
                    <th scope="col">{% translate 'Message' %}</th>
                </tr>
                </thead>
                {% for o in log_entries %}
                    <tr>
                        <td>{{ o.created_date|date:"SHORT_DATETIME_FORMAT" }}</td>
                        <td>{{ o.actor.get_display_name|default_if_none:o.actor }}</td>
                        <td>{{ o.render }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>

        {% if perms.accounts.manage %}
            <form method="POST" action="{{ create_text_log_entry_action_url }}">
                {% csrf_token %}
                {% comment %}
                    Ideally we would let the form field render itself here, but it's easier to style as
                    an inline field
                    this way.
                {% endcomment %}
                <div class="d-flex flex-wrap justify-content-end">
                    <input class="form-control m-1" name="text"
                           placeholder="{% translate "Notes about this user" %}">
                    <button class="btn tapir-btn btn-sm btn-info m-1" type="submit"
                            id="add_note_button" style="min-width: 100px;">
                        <span class="material-icons">note_add</span>
                        {% translate "Add Note" %}
                    </button>
                </div>
            </form>
        {% endif %}
    </div>
</div>
